[build]
  command = "npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[[redirects]]
  # This rule ensures that if a user refreshes on a dynamic route, 
  # Netlify hands the request back to the Next.js App Router.
  from = "/*"
  to = "/index.html"
  status = 200

[[redirects]]
  # Optional: Specific helper for your Supabase callback if you experience issues
  from = "/auth/callback"
  to = "/auth/callback"
  status = 200